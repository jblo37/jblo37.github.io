<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Total de Puntos de Participantes</title>
</head>
<body>
    <h1>Total de Puntos de los Participantes</h1>
    <div id="result">Cargando...</div>

    <script>
        const API_KEY = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6ImY4MjBkZjJhLTZmZGEtNDJiNS05NmU0LTMyNmJiZGVlNDg3YyIsImlhdCI6MTcyMjIwNTE0Mywic3ViIjoiZGV2ZWxvcGVyL2I5MjBmNmIyLTI0MDAtZGM3Zi1lZGM2LWYxNzI4MTYzMDYyOCIsInNjb3BlcyI6WyJyb3lhbGUiXSwibGltaXRzIjpbeyJ0aWVyIjoiZGV2ZWxvcGVyL3NpbHZlciIsInR5cGUiOiJ0aHJvdHRsaW5nIn0seyJjaWRycyI6WyIxODkuMTQzLjIyNS4yMzgiXSwidHlwZSI6ImNsaWVudCJ9XX0.HBuxPnSC6XhL3eJ4UuUqRImRRA1PfjKGz5UPiAqm9pn800-u_k0K7AicrxBjCDffpwIHKLIczydyG6fV-3gROg';  // Reemplaza con tu API Key
        const CLAN_TAG = 'LQQR9GQR';  // Reemplaza con el tag del clan
        const URL = https://api.clashroyale.com/v1/clans/${CLAN_TAG}/riverracelog;

        async function getClanRiverRacePoints() {
            try {
                const response = await fetch(URL, {
                    headers: {
                        'Authorization': Bearer ${API_KEY}
                    }
                });

                if (!response.ok) {
                    throw new Error('Error en la solicitud: ' + response.statusText);
                }

                const data = await response.json();
                const riverRaceLog = data.items || [];  // Asegúrate de que 'items' es el campo correcto

                let totalPoints = 0;
                riverRaceLog.forEach(log => {
                    if (log.participants) {
                        log.participants.forEach(participant => {
                            totalPoints += participant.points || 0;  // Asegúrate de que 'points' es el campo correcto
                        });
                    }
                });

                document.getElementById('result').innerText = Total de puntos de los participantes: ${totalPoints};
            } catch (error) {
                document.getElementById('result').innerText = 'Error al consultar la API: ' + error.message;
            }
        }

        getClanRiverRacePoints();
    </script>
</body>
</html>
